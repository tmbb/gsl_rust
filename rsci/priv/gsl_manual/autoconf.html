

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Autoconf Macros &mdash; GSL 2.8 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GSL CBLAS Library" href="cblas.html" />
    <link rel="prev" title="Contributors to GSL" href="contrib.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GSL
          

          
          </a>

          
            
            
              <div class="version">
                2.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="err.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="math.html">Mathematical Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex.html">Complex Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="poly.html">Polynomials</a></li>
<li class="toctree-l1"><a class="reference internal" href="specfunc.html">Special Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="vectors.html">Vectors and Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="permutation.html">Permutations</a></li>
<li class="toctree-l1"><a class="reference internal" href="combination.html">Combinations</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiset.html">Multisets</a></li>
<li class="toctree-l1"><a class="reference internal" href="sort.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="blas.html">BLAS Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="linalg.html">Linear Algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="eigen.html">Eigensystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft.html">Fast Fourier Transforms (FFTs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Numerical Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="rng.html">Random Number Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="qrng.html">Quasi-Random Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="randist.html">Random Number Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="rstat.html">Running Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="movstat.html">Moving Window Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter.html">Digital Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="histogram.html">Histograms</a></li>
<li class="toctree-l1"><a class="reference internal" href="ntuple.html">N-tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="montecarlo.html">Monte Carlo Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="siman.html">Simulated Annealing</a></li>
<li class="toctree-l1"><a class="reference internal" href="ode-initval.html">Ordinary Differential Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interp.html">Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="diff.html">Numerical Differentiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheb.html">Chebyshev Approximations</a></li>
<li class="toctree-l1"><a class="reference internal" href="sum.html">Series Acceleration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dwt.html">Wavelet Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="dht.html">Discrete Hankel Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="roots.html">One Dimensional Root-Finding</a></li>
<li class="toctree-l1"><a class="reference internal" href="min.html">One Dimensional Minimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiroots.html">Multidimensional Root-Finding</a></li>
<li class="toctree-l1"><a class="reference internal" href="multimin.html">Multidimensional Minimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="lls.html">Linear Least-Squares Fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="nls.html">Nonlinear Least-Squares Fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="bspline.html">Basis Splines</a></li>
<li class="toctree-l1"><a class="reference internal" href="spmatrix.html">Sparse Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="spblas.html">Sparse BLAS Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="splinalg.html">Sparse Linear Algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="const.html">Physical Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="ieee754.html">IEEE floating-point arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging Numerical Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributors to GSL</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Autoconf Macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="cblas.html">GSL CBLAS Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpl.html">GNU General Public License</a></li>
<li class="toctree-l1"><a class="reference internal" href="fdl.html">GNU Free Documentation License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GSL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Autoconf Macros</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/autoconf.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cblas.html" class="btn btn-neutral float-right" title="GSL CBLAS Library" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="contrib.html" class="btn btn-neutral float-left" title="Contributors to GSL" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="autoconf-macros">
<span id="chap-autoconf-macros"></span><span id="index-0"></span><h1>Autoconf Macros<a class="headerlink" href="#autoconf-macros" title="Permalink to this heading">Â¶</a></h1>
<p>For applications using <code class="code docutils literal notranslate"><span class="pre">autoconf</span></code> the standard macro
<code class="code docutils literal notranslate"><span class="pre">AC_CHECK_LIB</span></code> can be used to link with GSL automatically
from a <code class="code docutils literal notranslate"><span class="pre">configure</span></code> script.  The library itself depends on the
presence of a CBLAS and math library as well, so these must also be
located before linking with the main <code class="code docutils literal notranslate"><span class="pre">libgsl</span></code> file.  The following
commands should be placed in the <code class="file docutils literal notranslate"><span class="pre">configure.ac</span></code> file to perform
these tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AC_CHECK_LIB</span><span class="p">([</span><span class="n">m</span><span class="p">],[</span><span class="n">cos</span><span class="p">])</span>
<span class="n">AC_CHECK_LIB</span><span class="p">([</span><span class="n">gslcblas</span><span class="p">],[</span><span class="n">cblas_dgemm</span><span class="p">])</span>
<span class="n">AC_CHECK_LIB</span><span class="p">([</span><span class="n">gsl</span><span class="p">],[</span><span class="n">gsl_blas_dgemm</span><span class="p">])</span>
</pre></div>
</div>
<p>It is important to check for <code class="code docutils literal notranslate"><span class="pre">libm</span></code> and <code class="code docutils literal notranslate"><span class="pre">libgslcblas</span></code> before
<code class="code docutils literal notranslate"><span class="pre">libgsl</span></code>, otherwise the tests will fail.  Assuming the libraries
are found the output during the configure stage looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">checking</span> <span class="k">for</span> <span class="n">cos</span> <span class="ow">in</span> <span class="o">-</span><span class="n">lm</span><span class="o">...</span> <span class="n">yes</span>
<span class="n">checking</span> <span class="k">for</span> <span class="n">cblas_dgemm</span> <span class="ow">in</span> <span class="o">-</span><span class="n">lgslcblas</span><span class="o">...</span> <span class="n">yes</span>
<span class="n">checking</span> <span class="k">for</span> <span class="n">gsl_blas_dgemm</span> <span class="ow">in</span> <span class="o">-</span><span class="n">lgsl</span><span class="o">...</span> <span class="n">yes</span>
</pre></div>
</div>
<p>If the library is found then the tests will define the macros
<code class="code docutils literal notranslate"><span class="pre">HAVE_LIBGSL</span></code>, <code class="code docutils literal notranslate"><span class="pre">HAVE_LIBGSLCBLAS</span></code>, <code class="code docutils literal notranslate"><span class="pre">HAVE_LIBM</span></code> and add
the options <code class="code docutils literal notranslate"><span class="pre">-lgsl</span> <span class="pre">-lgslcblas</span> <span class="pre">-lm</span></code> to the variable <code class="code docutils literal notranslate"><span class="pre">LIBS</span></code>.</p>
<p>The tests above will find any version of the library.  They are suitable
for general use, where the versions of the functions are not important.
An alternative macro is available in the file <code class="file docutils literal notranslate"><span class="pre">gsl.m4</span></code> to test for
a specific version of the library.  To use this macro simply add the
following line to your <code class="file docutils literal notranslate"><span class="pre">configure.in</span></code> file instead of the tests
above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AX_PATH_GSL</span><span class="p">(</span><span class="n">GSL_VERSION</span><span class="p">,</span>
           <span class="p">[</span><span class="n">action</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="n">found</span><span class="p">],</span>
           <span class="p">[</span><span class="n">action</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="ow">not</span><span class="o">-</span><span class="n">found</span><span class="p">])</span>
</pre></div>
</div>
<p>The argument <code class="xref c c-macro docutils literal notranslate"><span class="pre">GSL_VERSION</span></code> should be the two or three digit
<code class="code docutils literal notranslate"><span class="pre">major.minor</span></code> or <code class="code docutils literal notranslate"><span class="pre">major.minor.micro</span></code> version number of the release
you require. A suitable choice for <code class="code docutils literal notranslate"><span class="pre">action-if-not-found</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AC_MSG_ERROR</span><span class="p">(</span><span class="n">could</span> <span class="ow">not</span> <span class="n">find</span> <span class="n">required</span> <span class="n">version</span> <span class="n">of</span> <span class="n">GSL</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you can add the variables <code class="xref c c-macro docutils literal notranslate"><span class="pre">GSL_LIBS</span></code> and <code class="xref c c-macro docutils literal notranslate"><span class="pre">GSL_CFLAGS</span></code> to
your Makefile.am files to obtain the correct compiler flags.
<code class="xref c c-macro docutils literal notranslate"><span class="pre">GSL_LIBS</span></code> is equal to the output of the <code class="code docutils literal notranslate"><span class="pre">gsl-config</span> <span class="pre">--libs</span></code>
command and <code class="xref c c-macro docutils literal notranslate"><span class="pre">GSL_CFLAGS</span></code> is equal to <code class="code docutils literal notranslate"><span class="pre">gsl-config</span> <span class="pre">--cflags</span></code>
command. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>libfoo_la_LDFLAGS = -lfoo $(GSL_LIBS) -lgslcblas
</pre></div>
</div>
<p>Note that the macro <code class="xref c c-macro docutils literal notranslate"><span class="pre">AX_PATH_GSL</span></code> needs to use the C compiler so it
should appear in the <code class="file docutils literal notranslate"><span class="pre">configure.in</span></code> file before the macro
<code class="xref c c-macro docutils literal notranslate"><span class="pre">AC_LANG_CPLUSPLUS</span></code> for programs that use C++.</p>
<p>To test for <code class="code docutils literal notranslate"><span class="pre">inline</span></code> the following test should be placed in your
<code class="file docutils literal notranslate"><span class="pre">configure.in</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AC_C_INLINE</span>

<span class="k">if</span> <span class="n">test</span> <span class="s2">&quot;$ac_cv_c_inline&quot;</span> <span class="o">!=</span> <span class="n">no</span> <span class="p">;</span> <span class="n">then</span>
  <span class="n">AC_DEFINE</span><span class="p">(</span><span class="n">HAVE_INLINE</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">AC_SUBST</span><span class="p">(</span><span class="n">HAVE_INLINE</span><span class="p">)</span>
<span class="n">fi</span>
</pre></div>
</div>
<p>and the macro will then be defined in the compilation flags or by
including the file <code class="file docutils literal notranslate"><span class="pre">config.h</span></code> before any library headers.</p>
<p>The following autoconf test will check for <code class="code docutils literal notranslate"><span class="pre">extern</span> <span class="pre">inline</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dnl Check for &quot;extern inline&quot;, using a modified version
dnl of the test for AC_C_INLINE from acspecific.mt
dnl
AC_CACHE_CHECK([for extern inline], ac_cv_c_extern_inline,
[ac_cv_c_extern_inline=no
AC_TRY_COMPILE([extern $ac_cv_c_inline double foo(double x);
extern $ac_cv_c_inline double foo(double x) { return x+1.0; };
double foo (double x) { return x + 1.0; };],
[  foo(1.0)  ],
[ac_cv_c_extern_inline=&quot;yes&quot;])
])

if test &quot;$ac_cv_c_extern_inline&quot; != no ; then
  AC_DEFINE(HAVE_INLINE,1)
  AC_SUBST(HAVE_INLINE)
fi
</pre></div>
</div>
<p>The substitution of portability functions can be made automatically if
you use <code class="code docutils literal notranslate"><span class="pre">autoconf</span></code>. For example, to test whether the BSD function
<code class="xref c c-func docutils literal notranslate"><span class="pre">hypot()</span></code> is available you can include the following line in the
configure file <code class="file docutils literal notranslate"><span class="pre">configure.in</span></code> for your application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AC_CHECK_FUNCS</span><span class="p">(</span><span class="n">hypot</span><span class="p">)</span>
</pre></div>
</div>
<p>and place the following macro definitions in the file
<code class="file docutils literal notranslate"><span class="pre">config.h.in</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="n">Substitute</span> <span class="n">gsl_hypot</span> <span class="k">for</span> <span class="n">missing</span> <span class="n">system</span> <span class="n">hypot</span> <span class="o">*/</span>

<span class="c1">#ifndef HAVE_HYPOT</span>
<span class="c1">#define hypot gsl_hypot</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>The application source files can then use the include command
<code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;config.h&gt;</span></code> to substitute <a class="reference internal" href="math.html#c.gsl_hypot" title="gsl_hypot"><code class="xref c c-func docutils literal notranslate"><span class="pre">gsl_hypot()</span></code></a> for each
occurrence of <code class="xref c c-func docutils literal notranslate"><span class="pre">hypot()</span></code> when <code class="xref c c-func docutils literal notranslate"><span class="pre">hypot()</span></code> is not available.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cblas.html" class="btn btn-neutral float-right" title="GSL CBLAS Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="contrib.html" class="btn btn-neutral float-left" title="Contributors to GSL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 1996-2024 The GSL Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>